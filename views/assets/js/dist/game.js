!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){class n{constructor(t,e,n,i){this.x=t,this.y=e,this.width=2,this.height=10}move(t){}requestMove(){}isColliding(t){return t.x<this.x+this.width&&t.x>this.x-this.width&&t.y<this.y+this.height&&t.y>this.y}}class i{constructor(t,e,n){this.x=t,this.y=e,this.width=1,this.height=2,this.velocity=n}move(t){this.x+=this.velocity.x*t,this.y+=this.velocity.y*t}collideWithBricks(t){for(const e of t)if(e.isColliding(this))return e;return null}collideWithXWalls(){return this.x<=0||this.x>=100}collideWithYWalls(){return this.y<=0||this.y>=100}}t.exports={Pong:class{constructor(){this.bricks=[new n(10,50),new n(90,50)],this.balls=[new i(50,50,{x:3,y:2*Math.random()-1}),new i(50,50,{x:-2,y:Math.random()-.5})],this.currentFrame=0}processFrame(t=1){for(const e of this.balls)(e.collideWithBricks(this.bricks)||e.collideWithXWalls())&&(e.velocity.x=-e.velocity.x),e.collideWithYWalls()&&(e.velocity.y=-e.velocity.y),e.move(t);this.currentFrame+=t}processEvent(t){for(let e of this.bricks)if(e.x<50){let n=0;for(let e of t.left)"u"==e&&(n-=1),"d"==e&&(n+=1);e.y+=n}else{let n=0;for(let e of t.right)"u"==e&&(n-=1),"d"==e&&(n+=1);e.y+=n}}synchronize(t){if(t.frame>=this.currentFrame){this.bricks=[];for(let e of t.bricks)this.bricks.push(new n(e.x,e.y));this.balls=[];for(let e of t.balls)this.balls.push(new i(e.x,e.y,e.velocity));this.currentFrame=t.frame}return this.currentFrame-t.frame}getSynchronisation(){return{bricks:this.bricks,balls:this.balls,frame:this.currentFrame}}}}},function(t,e,n){"use strict";n.r(e);const i=1;function o(t){u.ctx.fillStyle=t}function r(t,e,n,o){u.ctx.fillRect(t*i*u.width/100|0,e*i*u.height/100|0,n*i*u.width/100|0,o*i*u.height/100|0)}var s=n(0);n.d(e,"Context",function(){return u}),n.d(e,"player",function(){return h}),n.d(e,"journal",function(){return k});const c=10;let h,l,u={ctx:null,canvas:null,width:null,height:null,frameCount:null,fps:null,deltaTime:null};const a=20;let d,f,w,y=[],m=[],v=!0;function p(t){(l=new s.Pong).synchronize(t),setInterval(()=>{!function(t){f.emit("playerInfo",t)}(m),m=[]},100),k("initialisation done"),v=!1}function g(){u.ctx.clearRect(0,0,u.canvas.width,u.canvas.height),v||(d>0?d--:l.processFrame(u.deltaTime),function(t){for(const e of t.bricks)"left"==h.side&&e.x<50?o("red"):"right"==h.side&&e.x>50?o("red"):o("white"),r(e.x,e.y,e.width,e.height);for(const e of t.balls)o("white"),r(e.x,e.y,e.width,e.height)}(l)),u.fps=function(){let t=performance.now(),e=t-w;return w=t,1/e*1e3}(),u.deltaTime=c/u.fps,u.frameCount++,requestAnimationFrame(g)}function x(){u.canvas=document.getElementById("game"),u.ctx=u.canvas.getContext("2d"),u.frameCount=0,window.onresize=b,window.onkeydown=(t=>(function(t){40==t.keyCode&&m.push("d");38==t.keyCode&&m.push("u")})(t)),window.onkeyup=(t=>void 0),window.onmousemove=(t=>void 0),window.onmousedown=(t=>(function(t){t.clientY<u.height/2?m.push("u"):m.push("d")})(t)),window.onmouseup=(t=>void 0),window.ontouchmove=(t=>void 0),window.ontouchstart=(t=>(function(t){t.changedTouches[0].pageY<u.height/2?m.push("u"):m.push("d")})(t)),window.ontouchend=(t=>void 0),window.ontouchcancel=(t=>void 0),u.canvas.addEventListener("contextmenu",t=>t.preventDefault()),u.width=u.canvas.width=window.innerWidth-100,u.height=u.canvas.height=window.innerHeight-100,b()}function b(){u.width=u.canvas.width=window.innerWidth,setTimeout(()=>{u.height=u.canvas.height=window.innerHeight},0)}function k(t){y.push({date:new Date,message:t}),y.length>a&&y.shift()}document.addEventListener("DOMContentLoaded",function(){var t;x(),f=io(),t=(t=>{h=t.player,p(t.pong)}),f.on("connected",e=>{k("connected to server on "+e.side+" side"),t(e)}),f.on("disconnect",()=>{k("disconnected from server"),v=!0}),f.on("gameInformations",t=>{l.processEvent(t)}),f.on("gameSynchronisation",t=>{d=l.synchronize(t)}),g()})}]);